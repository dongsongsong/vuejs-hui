<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>添加资讯</title>
		<script type="text/javascript" src="__PUBLIC__/lib/jquery.min.js"></script>
		<script type="text/javascript" src="__PUBLIC__/layer/layer.js"></script>
		<script type="text/javascript" src="__PUBLIC__/js/H-ui.js"></script>
		<script type="text/javascript" src="__PUBLIC__/lib/WebUploader/js/webuploader.js"></script>
		<script type="text/javascript" src="__PUBLIC__/lib/WebUploader/js/upload.js"></script>
		<link rel="stylesheet" href="__PUBLIC__/lib/WebUploader/css/webuploader.css" />
		<link rel="stylesheet" href="__PUBLIC__/css/H-ui.min.css" />
	</head>
	<body>
		<form action="" method="post" class="form form-horizontal responsive" id="demoform-1">
          <div class="row cl">
            <label class="form-label col-2">标题：</label>
            <div class="formControls col-10">
              <input type="text" datatype="s5-16" errormsg="标题至少5个字符,最多16个字符！"  class="input-text" id="title" name="title" autocomplete="off" placeholder="标题">
            </div>
          </div>
           <div class="row cl">
            <label class="form-label col-2">封面：</label>
            <div class="formControls col-10">
            	<img src="" id="im" style="width:100px;height:100px;display: none;"/>
            	<div id="btn">选择图片</div>
              <input type="hidden" class="input-text" id="img" name="img" value="">
            </div>
          </div>
          <div class="row cl">
            <label class="form-label col-2">分类：</label>
            <div class="formControls col-10"> <span class="select-box">
              <select class="select" size="1" name="type" id="type">
                <option value="1">菜单一</option>
                <option value="2">菜单二</option>
                <option value="3">菜单三</option>
              </select>
              </span> </div>
          </div>
          <div class="row cl">
            <label class="form-label col-2">内容：</label>
            <div class="formControls col-10">
              <textarea class="textarea" placeholder="写点什么..." rows="" cols="" name="content"></textarea>
            </div>
          </div>
          <div class="row cl">
            <div class="col-10 col-offset-2">
              <input class="btn btn-primary radius" type="button" onclick="check()" value="提交">
            </div>
          </div>
        </form>
	</body>
	<script>
		// 初始化Web Uploader
		var BASE_URL = "";
		var uploader = WebUploader.create({
		    // 选完文件后，是否自动上传。
		    auto: true,
		    disableGlobalDnd:true,
		    // swf文件路径
		    swf: BASE_URL + '__PUBLIC__/lib/WebUploader/js/Uploader.swf',
		    // 文件接收服务端。
		    server: "__PUBLIC__/lib/WebUploader/upload.php",
		    // 选择文件的按钮。可选。
		    // 内部根据当前运行是创建，可能是input元素，也可能是flash.
		    pick: {
		    	id:'#btn'
		    },
		    // 只允许选择图片文件。
		    accept: {
		        title: 'Images',
		        extensions: 'gif,jpg,jpeg,bmp,png',
		        mimeTypes: 'image/*'
		    }
		});
		var url = "__PUBLIC__/uploads/";
		uploader.on( 'uploadSuccess', function(file,response) {
			$("#im").attr("src",url+response._raw);
			$("#im").show();
			$("#img").val(response._raw);
		});

		var title = $.trim($("#title").val());
		var type = $("#type").val();
		var img = $("#img").val();
		var content = $("#content").val();
		function check(){
			if(title==""){
				layer.msg('请输入内容', {shift: 6});
				$("#title").focus();
				return;
			}
		}
		
	</script>
</html>
